<?xml version="1.0" encoding="windows-1250"?>
<project name="Esselte - Deploy Assets QA">
    <workingDirectory>c:\SVN_Working_Directory\Esselte\Esselte_QA_Assets</workingDirectory>
    <artifactDirectory>c:\CCNet_Artefacts_Directory\Esselte\Esselte_QA_Assets</artifactDirectory>
    <webURL>http://vmp-ccnet.fcuk.local/server/local/project/Esselte - Deploy Assets QA/ViewProjectReport.aspx</webURL>
    <category>Internal Deployment</category>

    <labeller type="assemblyVersionLabeller">
        <major>1</major>
        <minor>0</minor>
        <build>0</build>
        <incrementOnFailure>false</incrementOnFailure>
    </labeller>

    <publishers>
        <xmllogger logDir="buildlogs" />
        <artifactcleanup cleanUpMethod="KeepLastXBuilds" cleanUpValue="50" />
        <rss items="50" />
    </publishers>

    <sourcecontrol type="svn">
        <trunkUrl>svn://vm-svn.fcdev.local/enp/trunk/Esselte Stable/assets</trunkUrl>
        <username>dev.tools</username>
        <password>KL129377</password>
        <workingDirectory>c:\SVN_Working_Directory\Esselte\Esselte_QA_Assets</workingDirectory>
        <executable>C:\Program Files\CollabNet\Subversion Client\svn.exe</executable>
    </sourcecontrol>

    <tasks>		
		<msbuild>
            <executable>C:\WINDOWS\Microsoft.NET\Framework\v4.0.30319\MSBuild.exe</executable>
            <workingDirectory>c:\SVN_Working_Directory\Esselte\Esselte_QA_Assets</workingDirectory>
            <projectFile>assets.csproj</projectFile>
            <buildArgs>/noconsolelogger /v:diag /t:Package /p:PackageLocation="c:\SVN_Working_Directory\Esselte\Esselte_QA_Assets\Package\Esselte.Assets.zip" /p:Configuration=Release</buildArgs>
            <targets>Package</targets>
            <timeout>900</timeout>
            <logger>C:\Program Files (x86)\CruiseControl.NET\server\ThoughtWorks.CruiseControl.MSBuild.dll</logger>
        </msbuild>
		
				<!-- generate templates -->
        <exec>
            <executable>C:\SVN_Working_Directory\Esselte\Esselte_QA_Assets\GenerateTemplates.cmd</executable>
			<baseDirectory>C:\SVN_Working_Directory\Esselte\Esselte_QA_Assets\</baseDirectory>
            <buildTimeoutSeconds>6000</buildTimeoutSeconds>
        </exec>
		
        <!-- deploy the package -->
        <exec>
            <executable>c:\SVN_Working_Directory\Esselte\Esselte_QA_Assets\Package\Esselte.Assets.deploy.cmd</executable>
            <buildArgs>/y /m:172.21.2.68</buildArgs>
            <buildTimeoutSeconds>6000</buildTimeoutSeconds>
        </exec>

        <exec>
            <executable>c:\SVN_Working_Directory\Esselte\Esselte_QA_Assets\Package\Esselte.Assets.deploy.cmd</executable>
            <buildArgs>/y /m:172.21.2.69</buildArgs>
            <buildTimeoutSeconds>6000</buildTimeoutSeconds>
        </exec>
		
		<!-- deploy generated templates -->
		<exec>
            <executable>Copy_Templates.bat</executable>
			<baseDirectory>C:\SVN_Working_Directory\Esselte\Esselte_QA_Assets\</baseDirectory>
        </exec>				
    </tasks>
</project>
